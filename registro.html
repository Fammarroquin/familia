<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regístrate</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        #formulario-registro {
            margin-top: 20px;
        }

        .formulario-oculto {
            display: none;
        }

        .mensaje-exito {
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <header id="main-header">
        <h1>Familia Marroquín Uculmana</h1>
        <nav id="main-nav" class="navbar navbar-expand-lg navbar-light">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div id="navbarNav" class="collapse navbar-collapse">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#home">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="nuestra-historia.html">Nuestra Historia</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="registro.html">registrate</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="registro_p.html">Blog de Comentarios</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <section id="formulario-registro" class="container mt-5">
        <h2>Regístrate</h2>
        <form id="registro-form">
            <div class="form-group">
                <label for="parentesco">
                    <i class="fas fa-users" style="color: #f39c12;"></i> ¿Qué eres de Papá Toto y Mamá Peta?
                </label>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="parentesco" id="soy-hijo" value="hijo">
                    <label class="form-check-label" for="soy-hijo">Soy hijo(a)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="parentesco" id="soy-nieto" value="nieto">
                    <label class="form-check-label" for="soy-nieto">Soy nieto(a)</label>
                </div>
            </div>

            <!-- Campos para Hijos -->
            <div id="form-hijo" class="formulario-oculto">
                <div class="form-group">
                    <label for="nombres-hijo">
                        <i class="fas fa-user" style="color: #e74c3c;"></i> Nombres:
                    </label>
                    <input type="text" class="form-control" id="nombres-hijo" name="nombres-hijo" placeholder="Nombres"
                        required>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="fecha-cumple-hijo">
                            <i class="fas fa-birthday-cake" style="color: #f1c40f;"></i> Fecha de cumpleaños:
                        </label>
                        <input type="date" class="form-control" id="fecha-cumple-hijo" name="fecha-cumple-hijo"
                            required>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="edad-hijo">
                            <i class="fas fa-hourglass-half" style="color: #3498db;"></i> Edad actual:
                        </label>
                        <input type="text" class="form-control" id="edad-hijo" name="edad-hijo" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label for="apodo-hijo" class="text-warning">
                        <i class="fas fa-user-ninja" style="color: #9b59b6;"></i> Más conocido como:
                    </label>
                    <input type="text" class="form-control" id="apodo-hijo" name="apodo-hijo" placeholder="Apodo"
                        required>
                </div>
                <div class="form-group">
                    <label for="email-hijo">
                        <i class="fas fa-envelope" style="color: #2ecc71;"></i> Correo electrónico:
                    </label>
                    <input type="email" class="form-control" id="email-hijo" name="email-hijo"
                        placeholder="Correo electrónico" required>
                </div>
                <button type="submit" class="btn btn-primary">Enviar</button>
            </div>

            <!-- Campos para Nietos -->
            <div id="form-nieto" class="formulario-oculto">
                <div class="form-group">
                    <label for="padre-nieto">
                        <i class="fas fa-user-tie" style="color: #2980b9;"></i> Padre/Madre:
                    </label>
                    <select class="form-control" id="padre-nieto" name="padre-nieto" required>
                        <option value="" disabled selected>Selecciona un padre/madre</option>
                        <option value="1">Ejemplo Padre 1</option>
                        <option value="2">Ejemplo Padre 2</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="nombres-nieto">
                        <i class="fas fa-user" style="color: #e74c3c;"></i> Nombres:
                    </label>
                    <input type="text" class="form-control" id="nombres-nieto" name="nombres-nieto"
                        placeholder="Nombres" required>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="fecha-cumple-nieto">
                            <i class="fas fa-birthday-cake" style="color: #f1c40f;"></i> Fecha de cumpleaños:
                        </label>
                        <input type="date" class="form-control" id="fecha-cumple-nieto" name="fecha-cumple-nieto"
                            required>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="edad-nieto">
                            <i class="fas fa-hourglass-half" style="color: #3498db;"></i> Edad actual:
                        </label>
                        <input type="text" class="form-control" id="edad-nieto" name="edad-nieto" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label for="apodo-nieto" class="text-warning">
                        <i class="fas fa-user-ninja" style="color: #9b59b6;"></i> Más conocido como:
                    </label>
                    <input type="text" class="form-control" id="apodo-nieto" name="apodo-nieto" placeholder="Apodo"
                        required>
                </div>
                <div class="form-group">
                    <label for="email-nieto">
                        <i class="fas fa-envelope" style="color: #2ecc71;"></i> Correo electrónico:
                    </label>
                    <input type="email" class="form-control" id="email-nieto" name="email-nieto"
                        placeholder="Correo electrónico" required>
                </div>
                <button type="submit" class="btn btn-primary">Enviar</button>
            </div>
        </form>
        <p id="mensaje" class="mensaje-exito"></p>
    </section>

    <footer class="bg-dark text-white text-center p-3 mt-5">
        Familia Marroquín
    </footer>


    <script>
        // Calcular la edad basado en la fecha de cumpleaños
        document.getElementById('fecha-cumple-hijo').addEventListener('change', function () {
            const cumpleanos = new Date(this.value);
            const hoy = new Date();
            let edad = hoy.getFullYear() - cumpleanos.getFullYear();
            const mes = hoy.getMonth() - cumpleanos.getMonth();

            if (mes < 0 || (mes === 0 && hoy.getDate() < cumpleanos.getDate())) {
                edad--;
            }

            document.getElementById('edad-hijo').value = edad;
        });

        document.getElementById('fecha-cumple-nieto').addEventListener('change', function () {
            const cumpleanos = new Date(this.value);
            const hoy = new Date();
            let edad = hoy.getFullYear() - cumpleanos.getFullYear();
            const mes = hoy.getMonth() - cumpleanos.getMonth();

            if (mes < 0 || (mes === 0 && hoy.getDate() < cumpleanos.getDate())) {
                edad--;
            }

            document.getElementById('edad-nieto').value = edad;
        });
    </script>

    <script>

        document.querySelectorAll('input[name="parentesco"]').forEach(radio => {
            radio.addEventListener('change', function () {
                document.getElementById('form-hijo').style.display = this.value === 'hijo' ? 'block' : 'none';
                document.getElementById('form-nieto').style.display = this.value === 'nieto' ? 'block' : 'none';
            });
        });
        document.getElementById("registro-form").addEventListener("submit", function (e) {
            e.preventDefault();

            // URL del Web App de Google Apps Script
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxXjUvof0uqffLfrGK4-y8sbRo1AleGzi5U8V0itKXaxtiQXGx5XgsfeWzcgUdpAkGF/exec'; // Pega aquí la URL del Web App

            // Recopilar datos del formulario
            const formData = new FormData(document.getElementById("registro-form"));

            // Enviar los datos al Web App
            fetch(scriptURL, { method: 'POST', body: formData })
                .then(response => alert('Registro enviado exitosamente'))
                .catch(error => console.error('Error!', error.message));
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>